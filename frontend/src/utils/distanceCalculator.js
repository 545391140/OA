// 距离计算工具函数 - 与携程数据保持一致

// 与携程数据完全一致的城市经纬度坐标
export const cityCoordinates = {
  // 国内热门城市 - 与携程数据完全一致
  '北京': { lat: 39.9042, lng: 116.4074 },
  '上海': { lat: 31.2304, lng: 121.4737 },
  '广州': { lat: 23.1291, lng: 113.2644 },
  '深圳': { lat: 22.5431, lng: 114.0579 },
  '成都': { lat: 30.5728, lng: 104.0668 },
  '杭州': { lat: 30.2741, lng: 120.1551 },
  '南京': { lat: 32.0603, lng: 118.7969 },
  '武汉': { lat: 30.5928, lng: 114.3055 },
  '西安': { lat: 34.3416, lng: 108.9398 },
  '重庆': { lat: 29.4316, lng: 106.9123 },
  '天津': { lat: 39.3434, lng: 117.3616 },
  '青岛': { lat: 36.0986, lng: 120.3719 },
  '大连': { lat: 38.9140, lng: 121.6147 },
  '沈阳': { lat: 41.8057, lng: 123.4315 },
  '长春': { lat: 43.8171, lng: 125.3235 },
  '哈尔滨': { lat: 45.7732, lng: 126.6577 },
  '昆明': { lat: 25.0389, lng: 102.7183 },
  '南宁': { lat: 22.8170, lng: 108.3669 },
  '福州': { lat: 26.0745, lng: 119.2965 },
  '厦门': { lat: 24.4798, lng: 118.0819 },
  '长沙': { lat: 28.2278, lng: 112.9388 },
  '南昌': { lat: 28.6820, lng: 115.8579 },
  '太原': { lat: 37.8706, lng: 112.5489 },
  '石家庄': { lat: 38.0428, lng: 114.5149 },
  '呼和浩特': { lat: 40.8414, lng: 111.7519 },
  '兰州': { lat: 36.0611, lng: 103.8343 },
  '西宁': { lat: 36.6232, lng: 101.7782 },
  '银川': { lat: 38.4872, lng: 106.2309 },
  '乌鲁木齐': { lat: 43.8256, lng: 87.6168 },
  '拉萨': { lat: 29.6520, lng: 91.1721 },
  '香港': { lat: 22.3193, lng: 114.1694 },
  '澳门': { lat: 22.1987, lng: 113.5439 },
  '台北': { lat: 25.0330, lng: 121.5654 },

  // 国际热门城市 - 与携程数据完全一致
  '纽约': { lat: 40.7128, lng: -74.0060 },
  '洛杉矶': { lat: 34.0522, lng: -118.2437 },
  '旧金山': { lat: 37.7749, lng: -122.4194 },
  '芝加哥': { lat: 41.8781, lng: -87.6298 },
  '西雅图': { lat: 47.6062, lng: -122.3321 },
  '波士顿': { lat: 42.3601, lng: -71.0589 },
  '迈阿密': { lat: 25.7617, lng: -80.1918 },
  '拉斯维加斯': { lat: 36.1699, lng: -115.1398 },
  '东京': { lat: 35.6762, lng: 139.6503 },
  '大阪': { lat: 34.6937, lng: 135.5023 },
  '京都': { lat: 35.0116, lng: 135.7681 },
  '名古屋': { lat: 35.1815, lng: 136.9066 },
  '福冈': { lat: 33.5904, lng: 130.4017 },
  '札幌': { lat: 43.0642, lng: 141.3469 },
  '首尔': { lat: 37.5665, lng: 126.9780 },
  '釜山': { lat: 35.1796, lng: 129.0756 },
  '济州': { lat: 33.4996, lng: 126.5312 },
  '新加坡': { lat: 1.3521, lng: 103.8198 },
  '曼谷': { lat: 13.7563, lng: 100.5018 },
  '普吉岛': { lat: 7.8804, lng: 98.3923 },
  '清迈': { lat: 18.7883, lng: 98.9853 },
  '吉隆坡': { lat: 3.1390, lng: 101.6869 },
  '槟城': { lat: 5.4164, lng: 100.3327 },
  '马尼拉': { lat: 14.5995, lng: 120.9842 },
  '宿务': { lat: 10.3157, lng: 123.8854 },
  '雅加达': { lat: -6.2088, lng: 106.8456 },
  '巴厘岛': { lat: -8.3405, lng: 115.0920 },
  '胡志明市': { lat: 10.8231, lng: 106.6297 },
  '河内': { lat: 21.0285, lng: 105.8542 },
  '岘港': { lat: 16.0544, lng: 108.2022 },
  '伦敦': { lat: 51.5074, lng: -0.1278 },
  '巴黎': { lat: 48.8566, lng: 2.3522 },
  '罗马': { lat: 41.9028, lng: 12.4964 },
  '米兰': { lat: 45.4642, lng: 9.1900 },
  '威尼斯': { lat: 45.4408, lng: 12.3155 },
  '佛罗伦萨': { lat: 43.7696, lng: 11.2558 },
  '马德里': { lat: 40.4168, lng: -3.7038 },
  '巴塞罗那': { lat: 41.3851, lng: 2.1734 },
  '阿姆斯特丹': { lat: 52.3676, lng: 4.9041 },
  '布鲁塞尔': { lat: 50.8503, lng: 4.3517 },
  '柏林': { lat: 52.5200, lng: 13.4050 },
  '慕尼黑': { lat: 48.1351, lng: 11.5820 },
  '法兰克福': { lat: 50.1109, lng: 8.6821 },
  '维也纳': { lat: 48.2082, lng: 16.3738 },
  '苏黎世': { lat: 47.3769, lng: 8.5417 },
  '日内瓦': { lat: 46.2044, lng: 6.1432 },
  '布拉格': { lat: 50.0755, lng: 14.4378 },
  '布达佩斯': { lat: 47.4979, lng: 19.0402 },
  '华沙': { lat: 52.2297, lng: 21.0122 },
  '斯德哥尔摩': { lat: 59.3293, lng: 18.0686 },
  '哥本哈根': { lat: 55.6761, lng: 12.5683 },
  '奥斯陆': { lat: 59.9139, lng: 10.7522 },
  '赫尔辛基': { lat: 60.1699, lng: 24.9384 },
  '都柏林': { lat: 53.3498, lng: -6.2603 },
  '里斯本': { lat: 38.7223, lng: -9.1393 },
  '雅典': { lat: 37.9838, lng: 23.7275 },
  '伊斯坦布尔': { lat: 41.0082, lng: 28.9784 },
  '莫斯科': { lat: 55.7558, lng: 37.6176 },
  '圣彼得堡': { lat: 59.9311, lng: 30.3609 },
  '悉尼': { lat: -33.8688, lng: 151.2093 },
  '墨尔本': { lat: -37.8136, lng: 144.9631 },
  '布里斯班': { lat: -27.4698, lng: 153.0251 },
  '珀斯': { lat: -31.9505, lng: 115.8605 },
  '阿德莱德': { lat: -34.9285, lng: 138.6007 },
  '奥克兰': { lat: -36.8485, lng: 174.7633 },
  '惠灵顿': { lat: -41.2924, lng: 174.7787 },
  '迪拜': { lat: 25.2048, lng: 55.2708 },
  '阿布扎比': { lat: 24.4539, lng: 54.3773 },
  '多哈': { lat: 25.2854, lng: 51.5310 },
  '开罗': { lat: 30.0444, lng: 31.2357 },
  '约翰内斯堡': { lat: -26.2041, lng: 28.0473 },
  '开普敦': { lat: -33.9249, lng: 18.4241 },
  '孟买': { lat: 19.0760, lng: 72.8777 },
  '新德里': { lat: 28.6139, lng: 77.2090 },
  '班加罗尔': { lat: 12.9716, lng: 77.5946 },
  '加尔各答': { lat: 22.5726, lng: 88.3639 },
  '金奈': { lat: 13.0827, lng: 80.2707 },
  '海得拉巴': { lat: 17.3850, lng: 78.4867 },
  '浦那': { lat: 18.5204, lng: 73.8567 },
  '艾哈迈达巴德': { lat: 23.0225, lng: 72.5714 },
  '斋浦尔': { lat: 26.9124, lng: 75.7873 },
  '勒克瑙': { lat: 26.8467, lng: 80.9462 },
  '坎普尔': { lat: 26.4499, lng: 80.3319 },
  '那格浦尔': { lat: 21.1458, lng: 79.0882 },
  '印多尔': { lat: 22.7196, lng: 75.8577 },
  '博帕尔': { lat: 23.2599, lng: 77.4126 },
  '维沙卡帕特南': { lat: 17.6868, lng: 83.2185 },
  '苏拉特': { lat: 21.1702, lng: 72.8311 },
  '瓦拉纳西': { lat: 25.3176, lng: 82.9739 },
  '巴特那': { lat: 25.5941, lng: 85.1376 },
  '兰契': { lat: 23.3441, lng: 85.3096 },
  '布巴内斯瓦尔': { lat: 20.2961, lng: 85.8245 },
  '古瓦哈提': { lat: 26.1445, lng: 91.7362 },
  '西隆': { lat: 25.5788, lng: 91.8933 },
  '因帕尔': { lat: 24.8170, lng: 93.9368 },
  '阿加尔塔拉': { lat: 23.8315, lng: 91.2862 },
  '艾兹瓦尔': { lat: 23.1645, lng: 92.9376 },
  '科希马': { lat: 25.6751, lng: 94.1106 },
  '甘托克': { lat: 27.3314, lng: 88.6138 },
  '伊塔那噶': { lat: 27.0844, lng: 93.6053 },
  '西姆拉': { lat: 31.1048, lng: 77.1734 },
  '昌迪加尔': { lat: 30.7333, lng: 76.7794 },
  '德拉敦': { lat: 30.3165, lng: 78.0322 },
  '斯利那加': { lat: 34.0837, lng: 74.7973 },
  '列城': { lat: 34.1526, lng: 77.5771 },
  '卡吉尔': { lat: 34.2269, lng: 76.1094 },
  '安拉阿巴德': { lat: 25.4358, lng: 81.8463 },
  '阿格拉': { lat: 26.2389, lng: 78.0081 },
  '瓜廖尔': { lat: 26.2183, lng: 78.1828 },
  '贾巴尔普尔': { lat: 23.1815, lng: 79.9864 },
  '赖布尔': { lat: 21.2514, lng: 81.6296 },
  '比拉斯布尔': { lat: 22.0796, lng: 82.1391 },
  '杜尔格': { lat: 21.1900, lng: 81.2849 },
  '拉杰南德冈': { lat: 21.0969, lng: 81.0282 },
  '比莱': { lat: 21.8162, lng: 81.2849 },
  '科拉普特': { lat: 18.8046, lng: 82.7101 },
  '库塔克': { lat: 20.4625, lng: 85.8829 },
  '巴拉索尔': { lat: 21.4944, lng: 86.9336 },
  '鲁尔克拉': { lat: 22.2492, lng: 84.8828 },
  '贾姆谢德布尔': { lat: 22.8046, lng: 86.2029 },
  '丹巴德': { lat: 23.7957, lng: 86.4304 },
  '博卡罗': { lat: 23.6654, lng: 85.9786 },
  '哈扎里巴格': { lat: 23.9924, lng: 85.3616 },
  '吉里迪': { lat: 24.1868, lng: 85.9905 },
  '科达马': { lat: 24.1868, lng: 85.9905 },
  '贾坎德邦': { lat: 23.6102, lng: 85.2799 },
  '比哈尔邦': { lat: 25.0961, lng: 85.3131 },
  '北方邦': { lat: 26.8467, lng: 80.9462 },
  '中央邦': { lat: 22.9734, lng: 78.6569 },
  '恰蒂斯加尔邦': { lat: 21.2787, lng: 81.8661 },
  '奥里萨邦': { lat: 20.9517, lng: 85.0985 },
  '西孟加拉邦': { lat: 22.9868, lng: 87.8550 },
  '阿萨姆邦': { lat: 26.2006, lng: 92.9376 },
  '梅加拉亚邦': { lat: 25.4670, lng: 91.3662 },
  '曼尼普尔邦': { lat: 24.6637, lng: 93.9063 },
  '特里普拉邦': { lat: 23.9408, lng: 91.9882 },
  '米佐拉姆邦': { lat: 23.1645, lng: 92.9376 },
  '那加兰邦': { lat: 26.1584, lng: 94.5624 },
  '锡金邦': { lat: 27.5330, lng: 88.5122 },
  '阿鲁纳恰尔邦': { lat: 28.2180, lng: 94.7278 },
  '喜马偕尔邦': { lat: 31.1048, lng: 77.1734 },
  '北阿坎德邦': { lat: 30.0668, lng: 79.0193 },
  '旁遮普邦': { lat: 31.1471, lng: 75.3412 },
  '哈里亚纳邦': { lat: 29.0588, lng: 76.0856 },
  '拉贾斯坦邦': { lat: 27.0238, lng: 74.2179 },
  '古吉拉特邦': { lat: 23.0225, lng: 72.5714 },
  '马哈拉施特拉邦': { lat: 19.7515, lng: 75.7139 },
  '卡纳塔克邦': { lat: 15.3173, lng: 75.7139 },
  '喀拉拉邦': { lat: 10.8505, lng: 76.2711 },
  '泰米尔纳德邦': { lat: 11.1271, lng: 78.6569 },
  '安得拉邦': { lat: 15.9129, lng: 79.7400 },
  '特伦甘纳邦': { lat: 18.1124, lng: 79.0193 },
  '果阿邦': { lat: 15.2993, lng: 74.1240 },
  '查谟和克什米尔': { lat: 33.7782, lng: 76.5762 },
  '拉达克': { lat: 34.1526, lng: 77.5771 },
  '德里': { lat: 28.7041, lng: 77.1025 },
  '本地治里': { lat: 11.9416, lng: 79.8083 },
  '达德拉和纳加尔哈维利': { lat: 20.1809, lng: 73.0169 },
  '达曼和迪乌': { lat: 20.4283, lng: 72.8397 },
  '拉克沙群岛': { lat: 10.5667, lng: 72.6417 },
  '安达曼和尼科巴群岛': { lat: 11.7401, lng: 92.6586 }
};

// 计算两点之间的距离（使用Haversine公式）
export function calculateDistance(city1, city2) {
  if (!city1 || !city2) {
    return null;
  }

  const coord1 = cityCoordinates[city1];
  const coord2 = cityCoordinates[city2];

  if (!coord1 || !coord2) {
    return null;
  }

  const R = 6371; // 地球半径（公里）
  const dLat = toRadians(coord2.lat - coord1.lat);
  const dLng = toRadians(coord2.lng - coord1.lng);
  
  const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +
    Math.cos(toRadians(coord1.lat)) * Math.cos(toRadians(coord2.lat)) *
    Math.sin(dLng / 2) * Math.sin(dLng / 2);
  
  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
  const distance = R * c;

  return Math.round(distance);
}

// 角度转弧度
function toRadians(degrees) {
  return degrees * (Math.PI / 180);
}

// 格式化距离显示
export function formatDistance(distance) {
  if (distance === null || distance === undefined) {
    return '未知距离';
  }
  
  if (distance < 1) {
    return '< 1公里';
  } else {
    return `${distance}公里`;
  }
}

// 获取城市坐标
export function getCityCoordinates(cityName) {
  return cityCoordinates[cityName] || null;
}

// 检查城市是否支持距离计算
export function isCitySupported(cityName) {
  return cityCoordinates.hasOwnProperty(cityName);
}
